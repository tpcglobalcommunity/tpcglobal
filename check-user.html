<!DOCTYPE html>
<html>
<head>
    <title>Check User Registration</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>Check User Registration</h1>
    <input type="email" id="emailInput" placeholder="Enter email to check" value="ctgoldbtc@gmail.com">
    <button onclick="checkUser()">Check User</button>
    <div id="result"></div>

    <script>
        // Ganti dengan URL dan Anon Key dari project Anda
        const supabaseUrl = 'YOUR_SUPABASE_URL';
        const supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
        
        const supabase = createClient(supabaseUrl, supabaseAnonKey);

        async function checkUser() {
            const email = document.getElementById('emailInput').value;
            const resultDiv = document.getElementById('result');
            
            try {
                // Method 1: Check via auth.users (admin only)
                console.log('Checking user:', email);
                
                // Method 2: Check via profiles table (if user has profile)
                const { data: profiles, error: profileError } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('email', email);
                
                if (profileError) {
                    resultDiv.innerHTML = `<p style="color: red;">Error: ${profileError.message}</p>`;
                    return;
                }
                
                if (profiles && profiles.length > 0) {
                    const profile = profiles[0];
                    resultDiv.innerHTML = `
                        <h3>User Found! âœ…</h3>
                        <p><strong>ID:</strong> ${profile.id}</p>
                        <p><strong>Email:</strong> ${profile.email}</p>
                        <p><strong>Username:</strong> ${profile.username || 'Not set'}</p>
                        <p><strong>Full Name:</strong> ${profile.full_name || 'Not set'}</p>
                        <p><strong>Referral Code:</strong> ${profile.referral_code}</p>
                        <p><strong>Created:</strong> ${new Date(profile.created_at).toLocaleString()}</p>
                        <p><strong>Verified:</strong> ${profile.is_verified ? 'Yes' : 'No'}</p>
                        <p><strong>Profile Completed:</strong> ${profile.profile_completed ? 'Yes' : 'No'}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `<p style="color: orange;">User with email ${email} not found in profiles table</p>`;
                }
                
            } catch (error) {
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
